## ER 모델

부모엔터티 - 스스로 PK를 가지고 있는 엔터티

식별자관계 (강한 연결관계, 실선)

- 부모엔터티로 상속받은 속성이 자식엔터티의 주식별자가 되는 경우
  - 주식별자 : 타 엔터티와의 참조관계를 연결할 수 있는 식별자

비식별자관계 (약한 연결관계, 점선)

- 부모엔터티로 상속받은 속성이 자식엔터티의 일반 속성이 되는 경우

> 식별자 관계로만 관계를 구성하면 조인조건의 개수가 매우 많아져서 복잡성이 증가하지만 성능은 증가
>
> 비식별자 관계로만 관계를 구성하면 많은(여러 번의) 조인이 필요해짐



**자기참조관계**

- 대부분 1:M 관계

- 부서, QnA, 부품관리, 사건 사고



## 데이터 분석유형

#### Descriptive analysis (기술 통계)

- 주어진 **데이터를 요약/집계하여 데이터의 특성을 규명**
  - 데이터의 특성을 이해하기 쉽게 기술하는 통계
  - 과거 데이터의 **단순 계산/집계 (Fact)**
  - 분석 결과를 따로 해석하는 과정은 거치지 않음

#### Exploratory analysis (탐색적 분석)

- **여러 변수 간 trend, 패턴, 관계를 찾는 것**
  - 통계적 기법을 사용한 모델링이라기 보다는 **그래프(주로 plot)를 통한 사실 확인이 주된 작업**
  - 데이터 분석 프로젝트 초기에 가설 수립을 위해 사용
  - 데이터의 신뢰성을 확인하는 과정이 선행되야 함

#### Inferential analysis (추론적 통계 분석)

- **샘플 - 모집단 간의 관계를 탐구**하는 것이 이 분석 유형의 목적
- 샘플에서 얻어낸 정보가 모집단에도 적용될 수 있는지를 검토하는 것
  - "95%의 확률로 모집단의 평균 점수는 80 ~ 85점 사이라고 말할 수 있다."
  - "그룹 A의 성적이 그룹 B보다 유의미하게 높았다"

#### Predictive analysis

- 머신 러닝, 의사결정트리 등 **다양한 통계적 기법을 사용하여 미래 혹은 발생하지 않은 어떤 사건에 대한 예측**이 주요 목표
  - "왜" 보다는 "정확한 예측"을 하는 것이 주요 관심
  - 특정한 설명 변수가 어떤 매커니즘으로 목표 변수에 영향을 미치는 가에 대한 설명력은 약함



## 분산분석 (ANOVA)

- 세 개 이상의 집단을 비교

#### 일원분산분석 

- 종속변수가 1개이며 범주형 독립변수도 1개인 경우
- 한 가지 변수의 변화가 종속변수에 미치는 영향을 보기 위해 사용
- ex) 소득을 종속변수로 했을 때 학력별로 집단을 나누어서 검정 (독립변수 1개)

#### 이원분산분석

- 범주형 독립변수가 2개 이상일 때 집단 간의 차이가 유의한지를 검증
- 상호작용효과 : 한 변수의 변화가 결과에 미치는 영향이 다른 변수의 수준에 따라 달라지는지 확인

- ex) 타이타닉 생존률을 종속변수로 했을 때 객식 등급 변수, 성별, 승무원/승객, 성인/어린이 등 범주형 독립변수들이 2개 이상일 때 

#### F-통계량

- 집단 간 분산 / 집단 내 분산으로 이 값이 클 수록 집단간의 차이가 크다고 할 수 있음
  - **각 집단 내 분산은 작고 집단 간 분산은 큰 경우**

```R
# Species : 독립변수, Sepal.Length : 종속변수
anova_result <- aov(Sepal.Length ~ Species, data=iris)
summary(anova_result)
#              Df Sum Sq Mean Sq F value Pr(>F)    
# Species       2  63.21  31.606   119.3 <2e-16 ***
# Residuals   147  38.96   0.265                   
# ---
# Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1

# p-value는 2e-16으로 유의수준 0.05보다 작으므로 대립 가설 채택
# 종별로 꽃받침 길이의 차이는 유의미함
```



## 시계열 분석

#### 계절 요인

- 짧은 구간으로 반복되는 트렌드가 있는 경우
  - 일주일 단위, 일년 단위, 사분기 단위, 계절 단위 등 고정된 주기

#### 순환 요인

- 명확한 이유 없이 알려지지 않은 주기를 가지고 변화하는 데이터

#### 불규칙 요인

- 추세/계절/순환 요인에 해당하지 않으면 불규칙 요인  (노이즈)

#### 정상성

- **시계열 데이터의 통계 모델은 데이터가 정상성을 갖는다는 가정하에 사용**

- 평균이 시간 흐름에 영향을 받지 않고 안정화 (일정)
- 분산이 시간 흐름에 영향을 받지 않고 안정화 (일정)
- 공분산이 시간 흐름에 영향을 받지 않고 안정화 (일정), 시차에만 의존

#### 차분

- 이전 시점의 데이터를 빼는 것으로 비정상 시계열을 정상 시계열로 전환하는 방법

```r
n <- head(Nile)
n
# 1120 1160  963 1210 1160 1160

n.diff1 <- diff(n, differences=1)
n.diff1
# 40 -197  247  -50    0
# (1160 - 1120, 963 - 1160, 1210 - 963, 1160 - 1210, 1160 - 1160)
n.diff2 <- diff(n, differences=2)
n.diff2
# -237  444 -297   50
# (-197 - 40, 247 - (-197), -50 - 247, 0 -(-50))
```



#### AR(자기회귀) 모델 

- 자신의 과거 값과의 관계에 기반

- EX) AR(1) : y<sub>t</sub> = alpha<sub>1</sub>y<sub>t-1</sub> + e<sub>t</sub>

#### MA(이동평균) 모델

- 현재의 잔차 값부터 q 시간 지연된 e<sub>t-q</sub>까지 q+1개 항의 선형 가중합 모델

- EX) MA(1) : e<sub>t</sub> + beta<sub>1</sub>e<sub>t-1</sub>

```R
# Nile 시계열 데이터의 p, d, q 인자를 추정
auto.arima(Nile)

# Series: Nile 
# ARIMA(1,1,1) 

# Coefficients:
#          ar1      ma1
#       0.2544  -0.8741
# s.e.  0.1194   0.0605

# sigma^2 estimated as 20177:  log likelihood=-630.63
# AIC=1267.25   AICc=1267.51   BIC=1275.04

# 추정한 인자들로 arima 모델 구성
Nile.arima <- arima(Nile, order=c(1, 1, 1))

# arima 모델로 미래 5개년의 데이터를 예측
# 점추정한 값과 80%, 95% 신뢰구간에 대한 값이 출력
forecast(Nile.arima, h=5)
#      Point Forecast    Lo 80     Hi 80    Lo 95    Hi 95
# 1971       816.1813 635.9909  996.3717 540.6039 1091.759
# 1972       835.5596 642.7830 1028.3363 540.7332 1130.386
# 1973       840.4889 643.5842 1037.3936 539.3492 1141.629
# 1974       841.7428 642.1115 1041.3741 536.4331 1147.053
# 1975       842.0617 640.0311 1044.0923 533.0826 1151.041
```

- arima model의 p, d, q 인자를 추정하고 모델을 생성 후 예측

```R
plot(forecast(Nile.arima, h=5))
```

<img src="https://user-images.githubusercontent.com/58063806/127126820-c3117573-f4df-4dbc-aedd-2808167fb0c5.png" width=80% />

오른쪽의 색칠된 부분이 예측치를 나타냄 (진한 부분 - 신뢰도 80% 구간, 연한 부분 - 신뢰도 95% 구간)

#### 분해시계열

```r
ldeaths.decomp <- decompose(ldeaths)
plot(ldeaths.decomp)
```

- 기존의 그래프를 경향, 계절성, 잔차로 분해해서 나타냄

<img src="https://user-images.githubusercontent.com/58063806/127127057-7dc6533f-d086-4138-bae7-7fcdc2a9a072.png" width=80%/>

